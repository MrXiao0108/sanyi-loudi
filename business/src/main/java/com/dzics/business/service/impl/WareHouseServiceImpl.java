package com.dzics.business.service.impl;import com.dzics.business.service.WareHouseService;import com.dzics.business.service.mq.RabbitmqService;import com.dzics.business.util.RedisUtil;import com.dzics.common.exception.CustomException;import com.dzics.common.exception.enums.CustomExceptionType;import com.dzics.common.exception.enums.CustomResponseCode;import com.dzics.common.model.response.Result;import com.dzics.common.util.RedisKey;import lombok.extern.slf4j.Slf4j;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;@SuppressWarnings("ALL")@Service@Slf4jpublic class WareHouseServiceImpl implements WareHouseService {    @Autowired    private RabbitmqService rabbitmqService;    @Autowired    private RedisUtil redisUtil;    @Override    public Result refresh(String sub) {        Object ref = redisUtil.get(RedisKey.REF);        if (ref != null) {            long expire = redisUtil.getExpire(RedisKey.REF);            throw new CustomException(CustomExceptionType.SYSTEM_ERROR, expire+"秒后重试");        }        rabbitmqService.refresh(sub, "REF");        redisUtil.set(RedisKey.REF, "REF", 180);        return Result.ok();    }}